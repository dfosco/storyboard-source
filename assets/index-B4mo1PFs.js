import{j as e}from"./vendor-primer-CxVDLtAo.js";/* empty css              */import{u as y,s as h,r as $}from"./FormContext-BUZxcrzV.js";import{j as b,L as k}from"./vendor-react-C38C2D6M.js";import"./index-CdG3T2qz.js";import{u as g}from"./useSceneData-DVr6BK2j.js";import{a as T}from"./useRecord-CgaJVKbE.js";import"./Select-Dbl10n_r.js";import{A as D}from"./AppSidebar-U5Mb_BAH.js";import{I as F}from"./IssueFormFields-yDh7BADK.js";import{R as O,V as t,T as i,B as C,d as j,D as f,M as x}from"./vendor-reshaped-Cq6zbE0i.js";import"./vendor-octicons-CjgvTD6I.js";const S="_issueRow_1cpdh_1",z={issueRow:S},B={todo:"○",in_progress:"◐",done:"●",cancelled:"✕"},E={Auth:"neutral",Backend:"critical",Feature:"primary",Bug:"critical",Security:"warning",Frontend:"primary",DevEx:"positive"},L={title:"",description:"",status:"todo",priority:"medium",assignee:"",project:"",estimate:""},w=["title","description","status","priority","assignee","project","estimate"];function v(s){w.forEach(a=>$(`${s}.${a}`))}function M({active:s,onClose:a,issueCount:d}){const[l]=y("draft.create.title"),o=b(),p=`FIL-${d+1}`,u=()=>{w.forEach(n=>{h(`draft.create.${n}`,L[n])})},m=()=>{if(!(l??"").trim())return;const n=l.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")||`new-issue-${d+1}`;w.forEach(r=>{const R=new URLSearchParams(window.location.hash.replace(/^#/,"")).get(`draft.create.${r}`)??"";h(`record.issues.${n}.${r}`,R)}),h(`record.issues.${n}.identifier`,p),v("draft.create"),a({reason:"save"}),o(`/issues/${n}`)},c=()=>{v("draft.create"),a({reason:"cancel"})};return e.jsxs(x,{active:s,onClose:c,onOpen:u,size:"600px",padding:6,position:"center",children:[e.jsx(x.Title,{children:"Create Issue"}),e.jsx(x.Subtitle,{children:p}),e.jsxs(t,{direction:"column",gap:4,paddingTop:4,children:[e.jsx(F,{prefix:"draft.create"}),e.jsxs(t,{direction:"row",justify:"end",gap:2,paddingTop:2,children:[e.jsx(j,{variant:"outline",onClick:c,children:"Cancel"}),e.jsx(j,{color:"primary",onClick:m,children:"Save"})]})]})]})}function Q(){const[s,a,d]=y("ui.createModal"),l=s==="true",o=T("issues"),p=g("signup.organization.name"),u=g("signup.fullName"),m=g("signup.organization.role"),c=o.filter(r=>r.status!=="done"&&r.status!=="cancelled"),n=o.filter(r=>r.status==="done"||r.status==="cancelled");return e.jsx(O,{defaultTheme:"reshaped",defaultColorMode:"dark",children:e.jsx(t,{backgroundColor:"page",minHeight:"100vh",padding:12,children:e.jsxs(t,{direction:"row",align:"start",gap:8,wrap:"no-wrap",children:[e.jsx(t.Item,{columns:2,children:e.jsx(D,{orgName:p,activePage:"Issues",userInfo:{name:u,role:m}})}),e.jsx(t.Item,{grow:!0,children:e.jsxs(t,{direction:"column",gap:4,maxWidth:"900px",children:[e.jsxs(t,{direction:"row",justify:"space-between",align:"center",children:[e.jsx(i,{variant:"featured-2",weight:"bold",children:"Issues"}),e.jsxs(t,{direction:"row",gap:2,align:"center",children:[e.jsxs(C,{color:"neutral",children:[o.length," total"]}),e.jsx(j,{size:"small",color:"primary",onClick:()=>a("true"),children:"Create issue"})]})]}),e.jsx(M,{active:l,onClose:()=>d(),issueCount:o.length}),e.jsxs(t,{direction:"column",gap:0,children:[e.jsx(t,{paddingBlock:2,paddingInline:3,children:e.jsxs(i,{variant:"caption-1",color:"neutral-faded",weight:"medium",children:["Open · ",c.length]})}),e.jsx(f,{}),c.map(r=>e.jsx(I,{issue:r},r.id))]}),n.length>0&&e.jsxs(t,{direction:"column",gap:0,children:[e.jsx(t,{paddingBlock:2,paddingInline:3,children:e.jsxs(i,{variant:"caption-1",color:"neutral-faded",weight:"medium",children:["Closed · ",n.length]})}),e.jsx(f,{}),n.map(r=>e.jsx(I,{issue:r},r.id))]})]})})]})})})}function I({issue:s}){return e.jsxs(e.Fragment,{children:[e.jsx(k,{to:`/issues/${s.id}`,className:z.issueRow,children:e.jsxs(t,{direction:"row",align:"center",gap:3,padding:3,children:[e.jsx(i,{variant:"body-3",color:"neutral-faded",attributes:{style:{minWidth:20}},children:B[s.status]||"○"}),e.jsx(i,{variant:"caption-1",color:"neutral-faded",attributes:{style:{minWidth:50}},children:s.identifier}),e.jsx(t.Item,{grow:!0,children:e.jsx(i,{variant:"body-3",children:s.title})}),e.jsx(t,{direction:"row",gap:1,children:(s.labels||[]).map(a=>e.jsx(C,{size:"small",color:E[a]||"neutral",children:a},a))}),e.jsx(i,{variant:"caption-1",color:"neutral-faded",attributes:{style:{textTransform:"capitalize"}},children:s.priority})]})}),e.jsx(f,{})]})}export{Q as default};
