import{b as d,u as x}from"./vendor-react-C38C2D6M.js";import{l as y}from"./index-CdG3T2qz.js";import{a as g,g as p,b as P,d as S,c as h}from"./FormContext-BUZxcrzV.js";function b(e,r){const n=P(),c=`record.${r}.`,f=Object.keys(n).filter(t=>t.startsWith(c));if(f.length===0)return e;const o=S(e),l={};for(const t of f){const a=t.slice(c.length),i=a.indexOf(".");if(i===-1)continue;const s=a.slice(0,i),u=a.slice(i+1);l[s]||(l[s]={}),l[s][u]=n[t]}for(const[t,a]of Object.entries(l)){const i=o.find(s=>s.id===t);if(i)for(const[s,u]of Object.entries(a))h(i,s,u);else{const s={id:t};for(const[u,m]of Object.entries(a))h(s,u,m);o.push(s)}}return o}function j(e,r="id"){const c=x()[r],f=d.useSyncExternalStore(g,p);return d.useMemo(()=>{if(!c)return null;try{const o=y(e);return b(o,e).find(t=>t[r]===c)??null}catch(o){return console.error(`[useRecord] ${o.message}`),null}},[e,r,c,f])}function v(e){const r=d.useSyncExternalStore(g,p);return d.useMemo(()=>{try{const n=y(e);return b(n,e)}catch(n){return console.error(`[useRecords] ${n.message}`),[]}},[e,r])}export{v as a,j as u};
