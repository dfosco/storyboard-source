import{j as e}from"./vendor-primer-CxVDLtAo.js";/* empty css              */import{u as I,s as E,r as v}from"./FormContext-BUZxcrzV.js";import{L as y}from"./vendor-react-C38C2D6M.js";import"./index-CdG3T2qz.js";import{u as x}from"./useSceneData-DVr6BK2j.js";import{u as k}from"./useRecord-CgaJVKbE.js";import"./Select-Dbl10n_r.js";import{A as b}from"./AppSidebar-U5Mb_BAH.js";import{s as A,p as R,I as T}from"./IssueFormFields-yDh7BADK.js";import{R as w,V as i,T as r,d as f,D as m,A as C,C as B,B as L,M as g}from"./vendor-reshaped-Cq6zbE0i.js";import"./vendor-octicons-CjgvTD6I.js";function d(n,l,c){return I(`record.${n}.${l}.${c}`)}const S={Auth:"neutral",Backend:"critical",Feature:"primary",Bug:"critical",Security:"warning",Frontend:"primary",DevEx:"positive"},h=["title","description","status","priority","assignee","project","estimate"];function D({issue:n,active:l,onClose:c}){const j={title:d("issues",n.id,"title"),description:d("issues",n.id,"description"),status:d("issues",n.id,"status"),priority:d("issues",n.id,"priority"),assignee:d("issues",n.id,"assignee"),project:d("issues",n.id,"project"),estimate:d("issues",n.id,"estimate")},a=()=>{h.forEach(s=>{E(`draft.edit.${s}`,n[s]??"")})},p=()=>{const s=new URLSearchParams(window.location.hash.replace(/^#/,""));h.forEach(t=>{const[,o]=j[t];o(s.get(`draft.edit.${t}`)??"")}),h.forEach(t=>v(`draft.edit.${t}`)),c({reason:"save"})},u=()=>{h.forEach(s=>v(`draft.edit.${s}`)),c({reason:"cancel"})};return e.jsxs(g,{active:l,onClose:u,onOpen:a,size:"600px",padding:6,position:"center",children:[e.jsx(g.Title,{children:"Edit Issue"}),e.jsx(g.Subtitle,{children:n.identifier}),e.jsxs(i,{direction:"column",gap:4,paddingTop:4,children:[e.jsx(T,{prefix:"draft.edit"}),e.jsxs(i,{direction:"row",justify:"end",gap:2,paddingTop:2,children:[e.jsx(f,{variant:"outline",onClick:u,children:"Cancel"}),e.jsx(f,{color:"primary",onClick:p,children:"Save"})]})]})]})}function q(){const[n,l,c]=I("ui.editModal"),j=n==="true",a=k("issues","id"),p=x("signup.organization.name"),u=x("signup.fullName"),s=x("signup.organization.role");return a?e.jsx(w,{defaultTheme:"reshaped",defaultColorMode:"dark",children:e.jsx(i,{backgroundColor:"page",minHeight:"100vh",padding:12,children:e.jsxs(i,{direction:"row",align:"start",gap:8,wrap:"no-wrap",children:[e.jsx(i.Item,{columns:2,children:e.jsx(b,{orgName:p,activePage:"Issues",userInfo:{name:u,role:s}})}),e.jsx(i.Item,{grow:!0,children:e.jsxs(i,{direction:"row",gap:8,align:"start",children:[e.jsx(i.Item,{grow:!0,children:e.jsxs(i,{direction:"column",gap:4,maxWidth:"720px",children:[e.jsxs(i,{direction:"row",gap:2,align:"center",justify:"space-between",children:[e.jsxs(i,{direction:"row",gap:2,align:"center",children:[e.jsx(y,{to:"/issues",style:{textDecoration:"none"},children:e.jsx(r,{variant:"caption-1",color:"neutral-faded",children:p||"Workspace"})}),e.jsx(r,{variant:"caption-1",color:"neutral-faded",children:"›"}),e.jsx(r,{variant:"caption-1",color:"neutral-faded",children:a.identifier})]}),e.jsx(f,{variant:"outline",size:"small",onClick:()=>l("true"),children:"Edit issue"})]}),e.jsx(D,{issue:a,active:j,onClose:()=>c()}),e.jsx(r,{variant:"featured-1",weight:"bold",children:a.title}),a.description&&e.jsx(r,{variant:"body-2",color:"neutral-faded",children:a.description}),a.acceptanceCriteria?.length>0&&e.jsxs(i,{direction:"column",gap:2,children:[e.jsx(r,{variant:"body-2",weight:"bold",children:"Acceptance Criteria"}),e.jsx("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:a.acceptanceCriteria.map((t,o)=>e.jsx("li",{style:{marginBottom:"0.5rem"},children:e.jsx(r,{variant:"body-3",children:t})},o))})]}),a.technicalNotes?.length>0&&e.jsxs(i,{direction:"column",gap:2,children:[e.jsx(r,{variant:"body-2",weight:"bold",children:"Technical Notes"}),e.jsx("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:a.technicalNotes.map((t,o)=>e.jsx("li",{style:{marginBottom:"0.5rem"},children:e.jsx(r,{variant:"body-3",children:t})},o))})]}),e.jsx(m,{}),e.jsx(r,{variant:"caption-1",color:"neutral-faded",children:"+ Add sub-issues"}),e.jsx(m,{}),e.jsxs(i,{direction:"column",gap:3,children:[e.jsx(r,{variant:"body-2",weight:"bold",children:"Activity"}),(a.activity||[]).map((t,o)=>e.jsxs(i,{direction:"row",gap:3,align:"center",children:[e.jsx(C,{src:t.avatar,initials:t.user?.[0]?.toUpperCase(),size:6}),e.jsxs(i,{direction:"column",children:[e.jsxs(r,{variant:"body-3",children:[e.jsx(r,{weight:"medium",children:t.user}),t.type==="created"&&" created the issue",t.type==="comment"&&":"]}),t.body&&e.jsx(r,{variant:"body-3",color:"neutral-faded",children:t.body}),e.jsx(r,{variant:"caption-1",color:"neutral-faded",children:t.time})]})]},o))]})]})}),e.jsx(i.Item,{columns:3,children:e.jsx(B,{padding:4,children:e.jsxs(i,{direction:"column",gap:4,children:[e.jsx(r,{variant:"caption-1",color:"neutral-faded",weight:"medium",children:"Properties"}),e.jsx(m,{}),e.jsxs(i,{direction:"column",gap:1,children:[e.jsx(r,{variant:"caption-1",color:"neutral-faded",children:"Status"}),e.jsx(r,{variant:"body-3",children:A[a.status]||a.status})]}),e.jsxs(i,{direction:"column",gap:1,children:[e.jsx(r,{variant:"caption-1",color:"neutral-faded",children:"Priority"}),e.jsx(r,{variant:"body-3",children:R[a.priority]||a.priority})]}),e.jsxs(i,{direction:"column",gap:1,children:[e.jsx(r,{variant:"caption-1",color:"neutral-faded",children:"Assignee"}),a.assignee?e.jsxs(i,{direction:"row",gap:2,align:"center",children:[e.jsx(C,{src:a.assigneeAvatar,initials:a.assignee?.[0]?.toUpperCase(),size:5}),e.jsx(r,{variant:"body-3",children:a.assignee})]}):e.jsx(r,{variant:"body-3",color:"neutral-faded",children:"Assign"})]}),e.jsxs(i,{direction:"column",gap:1,children:[e.jsx(r,{variant:"caption-1",color:"neutral-faded",children:"Labels"}),e.jsx(i,{direction:"row",gap:1,wrap:!0,children:(a.labels||[]).map(t=>e.jsx(L,{size:"small",color:S[t]||"neutral",children:t},t))})]}),e.jsxs(i,{direction:"column",gap:1,children:[e.jsx(r,{variant:"caption-1",color:"neutral-faded",children:"Project"}),e.jsx(r,{variant:"body-3",color:a.project?void 0:"neutral-faded",children:a.project||"Add to project"})]}),a.estimate&&e.jsxs(i,{direction:"column",gap:1,children:[e.jsx(r,{variant:"caption-1",color:"neutral-faded",children:"Estimate"}),e.jsxs(r,{variant:"body-3",children:[a.estimate," points"]})]})]})})})]})})]})})}):e.jsx(w,{defaultTheme:"reshaped",defaultColorMode:"dark",children:e.jsx(i,{backgroundColor:"page",minHeight:"100vh",padding:12,children:e.jsxs(i,{direction:"row",align:"start",gap:8,wrap:"no-wrap",children:[e.jsx(i.Item,{columns:2,children:e.jsx(b,{orgName:p,activePage:"Issues",userInfo:{name:u,role:s}})}),e.jsx(i.Item,{grow:!0,children:e.jsxs(i,{direction:"column",gap:4,align:"center",paddingBlock:16,children:[e.jsx(r,{variant:"featured-2",weight:"bold",children:"Issue not found"}),e.jsx(r,{variant:"body-3",color:"neutral-faded",children:"The issue you're looking for doesn't exist."}),e.jsx(y,{to:"/issues",children:"← Back to all issues"})]})})]})})})}export{q as default};
