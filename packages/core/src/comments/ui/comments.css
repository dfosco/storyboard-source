@import "tachyons/css/tachyons.css";

/*
  Comments UI custom styles.
  sb-* custom properties handle dark mode via prefers-color-scheme.
*/

/* --- Color tokens --- */
@media (prefers-color-scheme: dark) {
  :root {
    --sb-bg: #161b22;
    --sb-bg-inset: #0d1117;
    --sb-bg-muted: #21262d;
    --sb-border: #30363d;
    --sb-border-muted: #21262d;
    --sb-fg: #e6edf3;
    --sb-fg-muted: #8b949e;
    --sb-fg-accent: #58a6ff;
    --sb-fg-success: #3fb950;
    --sb-fg-danger: #f85149;
    --sb-btn-success: #238636;
  }
}
@media (prefers-color-scheme: light) {
  :root {
    --sb-bg: #ffffff;
    --sb-bg-inset: #f6f8fa;
    --sb-bg-muted: #f3f4f6;
    --sb-border: #d1d5db;
    --sb-border-muted: #e5e7eb;
    --sb-fg: #1f2328;
    --sb-fg-muted: #656d76;
    --sb-fg-accent: #0969da;
    --sb-fg-success: #1a7f37;
    --sb-fg-danger: #d1242f;
    --sb-btn-success: #1a7f37;
  }
}
/* Fallback to dark */
:root {
  --sb-bg: #161b22;
  --sb-bg-inset: #0d1117;
  --sb-bg-muted: #21262d;
  --sb-border: #30363d;
  --sb-border-muted: #21262d;
  --sb-fg: #e6edf3;
  --sb-fg-muted: #8b949e;
  --sb-fg-accent: #58a6ff;
  --sb-fg-success: #3fb950;
  --sb-fg-danger: #f85149;
  --sb-btn-success: #238636;
}

/* --- Semantic utility classes (supplement Tachyons) --- */
.sb-bg         { background-color: var(--sb-bg); }
.sb-bg-inset   { background-color: var(--sb-bg-inset); }
.sb-bg-muted   { background-color: var(--sb-bg-muted); }
.sb-b-default  { border-color: var(--sb-border); }
.sb-b-muted    { border-color: var(--sb-border-muted); }
.sb-fg         { color: var(--sb-fg); }
.sb-fg-muted   { color: var(--sb-fg-muted); }
.sb-fg-accent  { color: var(--sb-fg-accent); }
.sb-fg-success { color: var(--sb-fg-success); }
.sb-fg-danger  { color: var(--sb-fg-danger); }
.sb-btn-success { background-color: var(--sb-btn-success); color: #fff; }
.sb-btn-success:hover { filter: brightness(1.15); }
.sb-btn-cancel { background-color: var(--sb-bg-muted); border: 1px solid var(--sb-border); color: var(--sb-fg); }
.sb-btn-cancel:hover { background-color: var(--sb-border-muted); }

.sb-input {
  background: var(--sb-bg-inset);
  border: 1px solid var(--sb-border);
  color: var(--sb-fg);
  outline: none;
}
.sb-input:focus {
  border-color: var(--sb-fg-accent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--sb-fg-accent) 15%, transparent);
}
.sb-input::placeholder { color: var(--sb-fg-muted); }

.sb-shadow { box-shadow: 0 8px 24px rgba(0,0,0,0.15), 0 2px 6px rgba(0,0,0,0.1); }
@media (prefers-color-scheme: dark) {
  .sb-shadow { box-shadow: 0 8px 24px rgba(0,0,0,0.4), 0 2px 6px rgba(0,0,0,0.3); }
}

.sb-pill {
  border: 1px solid var(--sb-border);
  background: none;
  color: var(--sb-fg-muted);
  cursor: pointer;
  transition: border-color 100ms, background 100ms;
}
.sb-pill:hover { border-color: var(--sb-fg-muted); }
.sb-pill-active {
  border-color: color-mix(in srgb, var(--sb-fg-accent) 40%, transparent);
  background: color-mix(in srgb, var(--sb-fg-accent) 10%, transparent);
  color: var(--sb-fg-accent);
}

/* --- Comment mode cursor --- */
.sb-comment-mode {
  cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='%23fff' stroke-width='1.5' d='M19.503 9.97c1.204.489 1.112 2.224-.137 2.583l-6.305 1.813-2.88 5.895c-.571 1.168-2.296.957-2.569-.314L4.677 6.257A1.369 1.369 0 0 1 6.53 4.7z' clip-rule='evenodd'/%3E%3C/svg%3E") 4 2, crosshair;
}
@media (prefers-color-scheme: light) {
  .sb-comment-mode {
    cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='%231f2328' stroke-width='1.5' d='M19.503 9.97c1.204.489 1.112 2.224-.137 2.583l-6.305 1.813-2.88 5.895c-.571 1.168-2.296.957-2.569-.314L4.677 6.257A1.369 1.369 0 0 1 6.53 4.7z' clip-rule='evenodd'/%3E%3C/svg%3E") 4 2, crosshair;
  }
}

/* --- Comment pin --- */
.sb-comment-pin {
  border: 3px solid hsl(var(--pin-hue, 140), 50%, 38%);
}
.sb-comment-pin[data-resolved="true"] {
  border-color: var(--sb-fg-muted);
  opacity: 0.5;
}

/* --- Drawer animation --- */
@keyframes sb-drawer-slide-in {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}
.sb-drawer-animate { animation: sb-drawer-slide-in 150ms ease; }
